# åŸºåœ°æ”»å‡»ä¿®å¤æŠ¥å‘Š

## ğŸ” é—®é¢˜è¯Šæ–­

**é—®é¢˜æè¿°**: æ•Œäººçš„å¤§æœ¬è¥ä¸æ‰è¡€ï¼Œç©å®¶æ— æ³•é€šè¿‡æ”»å‡»åŸºåœ°è·èƒœ

**æ ¹æœ¬åŸå› åˆ†æ**: å•ä½æ”»å‡»çš„æ˜¯ä¸´æ—¶çš„åŸºåœ°å¯¹è±¡å‰¯æœ¬ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„æ¸¸æˆåŸºåœ°å¯¹è±¡

### è¯¦ç»†æŠ€æœ¯åˆ†æ

1. **é—®é¢˜ä»£ç ä½ç½®**: `handleAutoTargeting()` æ–¹æ³•ç¬¬317è¡Œ
   ```javascript
   // é—®é¢˜ä»£ç 
   const enemyBase = { x: this.enemyBase.x, y: this.enemyBase.y, type: 'enemyBase', health: this.enemyBase.health };
   playerUnit.setTarget(enemyBase); // æ”»å‡»ä¸´æ—¶å‰¯æœ¬ï¼
   ```

2. **é—®é¢˜å½±å“**:
   - ä¼¤å®³è¢«åº”ç”¨åˆ°ä¸´æ—¶å¯¹è±¡ä¸Š
   - çœŸæ­£çš„ `this.enemyBase` æ²¡æœ‰å—åˆ°ä¼¤å®³
   - å•ä½çœ‹èµ·æ¥åœ¨æ”»å‡»ï¼Œä½†åŸºåœ°è¡€é‡ä¸å‡å°‘

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤ç›®æ ‡è®¾ç½®é€»è¾‘
**æ–‡ä»¶**: `gh-pages/js/game.js`
**ä½ç½®**: `handleAutoTargeting()` æ–¹æ³•

**ä¿®å¤å‰**:
```javascript
const enemyBase = { x: this.enemyBase.x, y: this.enemyBase.y, type: 'enemyBase', health: this.enemyBase.health };
playerUnit.setTarget(enemyBase);
```

**ä¿®å¤å**:
```javascript
playerUnit.setTarget(this.enemyBase); // ç›´æ¥ä½¿ç”¨çœŸæ­£çš„æ•ŒäººåŸºåœ°
```

### 2. å®Œå–„åŸºåœ°å¯¹è±¡å±æ€§
**ç›®çš„**: ç¡®ä¿åŸºåœ°å¯¹è±¡æœ‰å®Œæ•´çš„å±æ€§ï¼Œæ”¯æŒå…‹åˆ¶å…³ç³»å’Œåœ°å½¢ä¼˜åŠ¿

**ä¿®å¤å‰**:
```javascript
this.enemyBase = { x: 650, y: 300, health: 1000 };
this.playerBase = { x: 50, y: 300, health: 1000 };
```

**ä¿®å¤å**:
```javascript
this.enemyBase = { x: 650, y: 300, health: 1000, faction: 'ai', type: 'enemyBase' };
this.playerBase = { x: 50, y: 300, health: 1000, faction: 'player', type: 'playerBase' };
```

### 3. ç§»é™¤ä¸´æ—¶å¯¹è±¡å®šä¹‰
**ç›®çš„**: æ¸…ç†ä»£ç ï¼Œé¿å…æ··æ·†

**åˆ é™¤ä»£ç **:
```javascript
const enemyBase = { x: this.enemyBase.x, y: this.enemyBase.y, type: 'enemyBase', health: this.enemyBase.health };
```

### 4. æ›´æ–°æ”»å‡»æ—¥å¿—æ˜¾ç¤º
**æ–‡ä»¶**: `gh-pages/js/game.js`
**æ–¹æ³•**: `getUnitDisplayName()`

**ä¿®å¤**:
```javascript
getUnitDisplayName(type) {
    const names = {
        'soldier': 'å£«å…µ',
        'tank': 'å¦å…‹',
        'worker': 'å·¥äºº',
        'playerBase': 'ç©å®¶åŸºåœ°',
        'enemyBase': 'æ•Œæ–¹åŸºåœ°'
    };
    return names[type] || type;
}
```

## ğŸ”§ ä¿®å¤èŒƒå›´

### ä¿®å¤çš„æ–¹æ³•å’Œä½ç½®:
1. **GameEngine æ„é€ å‡½æ•°** (ç¬¬11è¡Œ): æ·»åŠ åŸºåœ°å¯¹è±¡factionå’Œtypeå±æ€§
2. **updateLevel æ–¹æ³•** (ç¬¬563è¡Œ): é‡ç½®å…³å¡æ—¶æ·»åŠ åŸºåœ°å±æ€§
3. **startGame æ–¹æ³•** (ç¬¬626è¡Œ): å¼€å§‹æ¸¸æˆæ—¶æ·»åŠ åŸºåœ°å±æ€§
4. **handleAutoTargeting æ–¹æ³•** (ç¬¬342, 346è¡Œ): ä½¿ç”¨çœŸæ­£çš„æ•ŒäººåŸºåœ°å¯¹è±¡
5. **getUnitDisplayName æ–¹æ³•** (ç¬¬155è¡Œ): æ”¯æŒåŸºåœ°ç±»å‹æ˜¾ç¤º

### å½±å“çš„ç³»ç»Ÿ:
- âœ… **æˆ˜æ–—ç³»ç»Ÿ**: å•ä½ç°åœ¨èƒ½æ­£ç¡®æ”»å‡»çœŸæ­£çš„åŸºåœ°
- âœ… **å…‹åˆ¶å…³ç³»**: åŸºåœ°å¯¹è±¡æ”¯æŒå…‹åˆ¶å…³ç³»è®¡ç®—
- âœ… **åœ°å½¢ä¼˜åŠ¿**: åŸºåœ°å¯¹è±¡æ”¯æŒåœ°å½¢ä¼˜åŠ¿è®¡ç®—
- âœ… **æ”»å‡»æ—¥å¿—**: æ­£ç¡®æ˜¾ç¤º"æ”»å‡»æ•Œæ–¹åŸºåœ°"æ¶ˆæ¯
- âœ… **èƒœåˆ©æ¡ä»¶**: æ£€æŸ¥çœŸæ­£çš„åŸºåœ°è¡€é‡åˆ¤æ–­èƒœåˆ©

## ğŸ§ª æµ‹è¯•éªŒè¯

### æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤:
1. **å¯åŠ¨æ¸¸æˆ**: å¼€å§‹æ–°æ¸¸æˆ
2. **åˆ›å»ºå•ä½**: è®­ç»ƒå£«å…µæˆ–å¦å…‹
3. **æ”»å‡»åŸºåœ°**: å³é”®ç‚¹å‡»æ•Œæ–¹åŸºåœ°ï¼ˆçº¢è‰²åœ†åœˆï¼‰
4. **è§‚å¯Ÿæ—¥å¿—**: æ£€æŸ¥æˆ˜æ–—æ—¥å¿—æ˜¾ç¤ºæ”»å‡»ä¿¡æ¯
5. **éªŒè¯è¡€é‡**: ç¡®è®¤æ•Œæ–¹åŸºåœ°è¡€é‡ä¸‹é™

### é¢„æœŸç»“æœ:
- âœ… æˆ˜æ–—æ—¥å¿—: "ç©å®¶å£«å…µ æ”»å‡» æ•Œæ–¹åŸºåœ°ï¼Œé€ æˆ XX ä¼¤å®³"
- âœ… åŸºåœ°è¡€é‡: æ•Œæ–¹åŸºåœ°è¡€é‡æ¡æ˜æ˜¾å‡å°‘
- âœ… æ”»å‡»è·ç¦»: å•ä½åœ¨æ”»å‡»èŒƒå›´å†…æ—¶æ­£å¸¸æ”»å‡»
- âœ… å…‹åˆ¶å…³ç³»: ä¸åŒå•ä½å¯¹åŸºåœ°çš„å…‹åˆ¶æ•ˆæœ
- âœ… åœ°å½¢ä¼˜åŠ¿: åŸºåœ°é™„è¿‘å•ä½é˜²å¾¡åŠ æˆ

### æ•…éšœæ’é™¤:
å¦‚æœåŸºåœ°ä»ç„¶ä¸æ‰è¡€:
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°JavaScripté”™è¯¯
2. ç¡®è®¤å•ä½æ”»å‡»èŒƒå›´è¦†ç›–åŸºåœ°
3. éªŒè¯æˆ˜æ–—æ—¥å¿—æ˜¾ç¤ºæ”»å‡»ä¿¡æ¯
4. æ£€æŸ¥å•ä½æ”»å‡»å†·å´æ—¶é—´

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### æ”»å‡»è·ç¦»åˆ†æ:
- **å£«å…µæ”»å‡»èŒƒå›´**: 30åƒç´ 
- **å¦å…‹æ”»å‡»èŒƒå›´**: 50åƒç´ 
- **åŸºåœ°åŠå¾„**: 30åƒç´ ï¼ˆç‚¹å‡»æ£€æµ‹ï¼‰
- **æœ‰æ•ˆæ”»å‡»**: å•ä½éœ€è¦æ¥è¿‘åˆ°æ”»å‡»èŒƒå›´å†…

### ä¼¤å®³è®¡ç®—æµç¨‹:
1. å•ä½é€‰æ‹©ç›®æ ‡ â†’ `unit.setTarget(this.enemyBase)`
2. è·ç¦»æ£€æŸ¥ â†’ `distance <= unit.attackRange`
3. ä¼¤å®³è®¡ç®— â†’ `unit.attack(unit.target)`
4. ä¼¤å®³åº”ç”¨ â†’ `target.health -= damage`
5. æ—¥å¿—è®°å½• â†’ æˆ˜æ–—æ—¥å¿—æ˜¾ç¤ºæ”»å‡»ä¿¡æ¯

### å…‹åˆ¶å…³ç³»æ”¯æŒ:
- åŸºåœ°ç°åœ¨æœ‰`faction`å’Œ`type`å±æ€§
- å…‹åˆ¶å…³ç³»ç³»ç»Ÿèƒ½æ­£ç¡®å¤„ç†åŸºåœ°ç›®æ ‡
- åœ°å½¢ä¼˜åŠ¿è®¡ç®—èƒ½æ­£ç¡®è¯†åˆ«åŸºåœ°ä½ç½®

## ğŸ¯ æ¸¸æˆå¹³è¡¡æ€§

### ä¿®å¤åçš„ä¼˜åŠ¿:
1. **å…¬å¹³æ€§**: ç©å®¶èƒ½æ­£å¸¸æ”»å‡»æ•Œæ–¹åŸºåœ°
2. **ç­–ç•¥æ€§**: ç©å®¶éœ€è¦æ¥è¿‘åŸºåœ°æ‰èƒ½æ”»å‡»
3. **æŒ‘æˆ˜æ€§**: åŸºåœ°æœ‰é˜²å¾¡èŒƒå›´ï¼Œä¿æŠ¤åŸºåœ°å®‰å…¨
4. **å¯è§†æ€§**: æ”»å‡»æ—¥å¿—æ¸…æ¥šæ˜¾ç¤ºæ”»å‡»ä¿¡æ¯

### æ¸¸æˆä½“éªŒ:
- ç©å®¶ç°åœ¨èƒ½é€šè¿‡æ‘§æ¯æ•Œæ–¹åŸºåœ°è·èƒœ
- åŸºåœ°æ”»å‡»éœ€è¦ç­–ç•¥è§„åˆ’ï¼ˆæ¥è¿‘åŸºåœ°ï¼‰
- æˆ˜æ–—ç³»ç»Ÿå®Œå…¨æ¢å¤åŠŸèƒ½
- èƒœåˆ©æ¡ä»¶æ­£ç¡®æ‰§è¡Œ

## ğŸ“‹ éªŒè¯æ¸…å•

- [x] ä¿®å¤handleAutoTargetingä¸­çš„ä¸´æ—¶å¯¹è±¡é—®é¢˜
- [x] åœ¨æ‰€æœ‰åŸºåœ°åˆå§‹åŒ–ä¸­æ·»åŠ factionå’Œtypeå±æ€§
- [x] ç§»é™¤ä¸´æ—¶çš„enemyBaseå¯¹è±¡å®šä¹‰
- [x] æ›´æ–°getUnitDisplayNameæ”¯æŒåŸºåœ°ç±»å‹
- [x] ç¡®è®¤æ”»å‡»æ—¥å¿—æ­£ç¡®æ˜¾ç¤ºåŸºåœ°æ”»å‡»
- [x] éªŒè¯å…‹åˆ¶å…³ç³»æ”¯æŒåŸºåœ°ç›®æ ‡
- [x] ç¡®è®¤åœ°å½¢ä¼˜åŠ¿è®¡ç®—æ­£ç¡®
- [x] æµ‹è¯•å·¥å…·: `base_attack_test.html`

## ğŸ æ€»ç»“

**ä¿®å¤çŠ¶æ€**: âœ… å®Œå…¨ä¿®å¤

**ä¸»è¦æ”¹è¿›**:
1. è§£å†³äº†åŸºåœ°ä¸å—æ”»å‡»çš„æ ¹æœ¬é—®é¢˜
2. æ¢å¤äº†æ¸¸æˆçš„å…¬å¹³æ€§å’Œç­–ç•¥æ€§
3. ç¡®ä¿äº†èƒœåˆ©æ¡ä»¶çš„æ­£ç¡®æ‰§è¡Œ
4. æä¾›äº†å®Œæ•´çš„æµ‹è¯•éªŒè¯å·¥å…·

**ç”¨æˆ·ç°åœ¨å¯ä»¥**:
- æ­£å¸¸æ”»å‡»æ•Œæ–¹åŸºåœ°
- é€šè¿‡æ‘§æ¯åŸºåœ°è·å¾—èƒœåˆ©
- äº«å—å®Œæ•´çš„RTSæ¸¸æˆä½“éªŒ
- ä½“éªŒå•ä½å…‹åˆ¶å’Œåœ°å½¢ä¼˜åŠ¿ç³»ç»Ÿ

ä¿®å¤åçš„æ¸¸æˆç°åœ¨å…·æœ‰å®Œå…¨åŠŸèƒ½çš„åŸºåœ°æ”»å‡»ç³»ç»Ÿï¼Œç¡®ä¿äº†æ¸¸æˆçš„å…¬å¹³æ€§å’Œé€»è¾‘æ€§ã€‚